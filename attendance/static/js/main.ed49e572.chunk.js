(this.webpackJsonptake_attendance=this.webpackJsonptake_attendance||[]).push([[0],{18:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(13),i=n.n(r),s=(n(18),n(11)),c=n(2),o=n.n(c),d=n(3),u=n(4),l=n(5),m=n(9),h={attendanceService:null,eventService:null,userService:null},f=n(7),p=n(8),b=function(){function e(){Object(f.a)(this,e),this.maxRecordId=1e3,this.pendingRecords=[],this.attendanceRecords=[{user_id:99,firstname:"Zaphod",lastname:"Beeblebrox",phone:"",email:"",notes:"Presedent of the Galaxy",event_id:300,id:199},{user_id:100,firstname:"Alice",lastname:"Atalan",phone:"",email:"",notes:"A Tuba",event_id:1e3,id:200},{user_id:101,firstname:"Bob",lastname:"Shamilov",phone:"",email:"",notes:"Bob is a fella",event_id:1e3,id:201},{user_id:102,firstname:"Charlie",lastname:"Khalil",phone:"",email:"",notes:"C Saxophone",event_id:1e3,id:202},{user_id:103,firstname:"Denise",lastname:"Usoyan",phone:"",email:"",notes:"",event_id:1e3,id:203},{user_id:104,firstname:"Ethan",lastname:"Adi",phone:"",email:"",notes:"F Flute",event_id:1e3,id:204},{user_id:105,firstname:"Francine",lastname:"Shavershian",phone:"",email:"",notes:"C Flute",id:205},{user_id:106,firstname:"Greg",lastname:"Mori",phone:"",email:"",notes:"Clarinet",id:206},{user_id:107,firstname:"Harry",lastname:"Tamoyan",phone:"",email:"",notes:"Bassoon",id:207},{user_id:108,firstname:"Ichabod",lastname:"Crane",phone:"",email:"",notes:"Trombone",id:208},{user_id:110,firstname:"Niel",lastname:"Armstrong",phone:"",email:"",notes:"Astronaut",event_id:10,id:300},{user_id:111,firstname:"Oprah",lastname:"Khario",phone:"",email:"",notes:"Celebrety",event_id:10,id:310},{user_id:112,firstname:"Peter",lastname:"Serdar",phone:"",email:"",notes:"Dude",event_id:10,id:320},{user_id:113,firstname:"Quinn",lastname:"Evdal",phone:"",email:"",notes:"Beatles",event_id:10,id:330},{firstname:"Sonny",lastname:"Bono",phone:"",email:"",notes:"Celebrity husband",event_id:1e3,id:340},{firstname:"Frank",lastname:"Zappa",phone:"",email:"",notes:"Guitar",event_id:1004,id:350}]}return Object(p.a)(e,[{key:"retrieve",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.attendanceRecords,t&&(a=a.filter((function(e){return e.event_id===t}))),n&&(a=a.slice(0,n)),e.next=5,new Promise((function(e){return setTimeout(e,1e3*Math.random())}));case 5:return e.abrupt("return",Promise.resolve(a));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<this.items.length)){e.next=7;break}if(this.attendanceRecords[n].id!==t){e.next=4;break}return e.abrupt("return",Promise.resolve(this.items[n]));case 4:n++,e.next=1;break;case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1e3*Math.random())}));case 2:return++this.maxRecordId,(n=Object(l.a)({},t)).id=this.maxRecordId,this.attendanceRecords.push(n),e.abrupt("return",Promise.resolve(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1e3*Math.random())}));case 2:return this.attendanceRecords=this.attendanceRecords.filter((function(e){return t!==e.id})),e.abrupt("return",Promise.resolve(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),j=b,v=function(){function e(){Object(f.a)(this,e),this.events=[{id:1e3,title:"Workshop for 23 03 2011",date:"23 03 2011"},{id:205,title:"Workshop for 23 03 2011",date:"30 03 2011"},{id:206,title:"Workshop for 23 03 2011",date:"07 04 2011"},{id:207,title:"Workshop for 23 03 2011",date:"14 04 2011"}]}return Object(p.a)(e,[{key:"retrieve",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(this.events));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,a=0;case 2:if(!(a<this.events.length)){e.next=9;break}if(this.events[a].id!==t){e.next=6;break}return n=this.events[a],e.abrupt("break",9);case 6:a++,e.next=2;break;case 9:if(!n){e.next=13;break}return e.next=12,new Promise((function(e){return setTimeout(e,1e3*Math.random())}));case 12:return e.abrupt("return",Promise.resolve(n));case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),O=v,x=function(){function e(){Object(f.a)(this,e),this.users=[{id:99,name:"Zaphod",first_name:"Zaphond",last_name:"Beeblebrox",email:"zaphod@example.com",description:"Presedent of the Galaxy",nickname:"Zaphod Dude"},{id:1099,name:"FordP",first_name:"Ford",last_name:"Prefect",email:"ford@example.com",description:"Alien",nickname:"Fnord"},{id:1100,name:"AurthorD",first_name:"Arthor",last_name:"Dent",email:"arthor@example.com",description:"Sad Earthline",nickname:"DentArthorDent"},{id:1101,name:"MarvinA",first_name:"Marvin",last_name:"Android",email:"marvin@example.com",description:"Marvin the paranoid android",nickname:"SadMarvin"},{id:100,first_name:"Alice",last_name:"Atalan",description:"A Tuba"},{id:101,first_name:"Bob",last_name:"Shamilov",description:"Bob is a fella"},{id:102,first_name:"Charlie",last_name:"Suloev",description:"C Saxophone"},{id:103,first_name:"Denise",last_name:"Khalil"},{id:104,first_name:"Ethan",last_name:"Usoyan"},{id:2104,first_name:"Alexis",last_name:"Adi",description:"Trumpet"},{id:2105,first_name:"Aline",last_name:"Shavershian",description:"Percussion"},{id:2106,first_name:"Arturo",last_name:"Mori",description:"Percussion, Sax, Video, Photo."},{id:2107,first_name:"Alma",last_name:"Tamoyan",description:"We are music because we all are energy flowing."},{id:2108,first_name:"Andrew",last_name:"Ilyas",description:"Talented, industrious, unsuccessful musician."},{id:2109,first_name:"Brandon",last_name:"Khario",description:"Cornet"},{id:2110,first_name:"Brian",last_name:"Serdar",description:"Everything I Can"},{id:2111,first_name:"Clair",last_name:"Evdal",description:"Sousaphone, Trombone"},{id:2112,first_name:"Fred",last_name:"Boyik",description:"Multi-instrumentalist. I have played with The Carnival Band for over 10 years. Previously played with numerous Vancouver Bands."},{id:2113,first_name:"Hayley",last_name:"Mirza",description:"Percussion."},{id:2114,first_name:"Helen",last_name:"Khalif",description:"Knitter Potter Tuber."},{id:2115,first_name:"Henry",last_name:"Adzhoyev",description:"Dancer"},{id:2116,first_name:"James",last_name:"Shero",description:"It is not the size that counts, it is how you blow it."},{id:2117,first_name:"Max",last_name:"Hajoyan",description:"Trombone"}]}return Object(p.a)(e,[{key:"retrieve",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1e3*Math.random())}));case 2:return e.abrupt("return",Promise.resolve(this.users));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_=x,y=n(0),k=function(e){var t=e.name,n=t?"Attendance for "+t:"Loading...";return Object(y.jsx)("div",{className:"Header",children:Object(y.jsx)("h1",{children:n})})};var w=function(e){var t=e.searchTerm,n=e.setSearchTerm,a=e.filterRecent,r=e.setFilterRecent,i=e.filterOld,s=e.setFilterOld,c=e.filterNew,o=e.setFilterNew,d=e.filterPresent,u=e.setFilterPresent;return Object(y.jsx)("div",{className:"SearchBar",children:Object(y.jsxs)("form",{children:[Object(y.jsx)("input",{type:"text",name:"search",placeholder:"\ud83d\udd0d",value:t,onChange:function(e){return n(e.target.value)}}),Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"checkbox",name:"recent",id:"recent",checked:!!a,onChange:function(e){return r(e.target.checked)}}),Object(y.jsx)("label",{htmlFor:"recent",children:"recent"}),Object(y.jsx)("input",{type:"checkbox",name:"old",id:"old",checked:!!i,onChange:function(e){return s(e.target.checked)}}),Object(y.jsx)("label",{htmlFor:"old",children:"rusty"}),Object(y.jsx)("input",{type:"checkbox",name:"new",id:"new",checked:!!c,onChange:function(e){return o(e.target.checked)}}),Object(y.jsx)("label",{htmlFor:"new",children:"new folks"}),Object(y.jsx)("input",{type:"checkbox",name:"attendees",id:"attendees",checked:!!d,onChange:function(e){return u(e.target.checked)}}),Object(y.jsx)("label",{htmlFor:"attendees",children:"attendees"})]})})};var g=function(e){var t=e.attendee,n=e.pendingMap?e.pendingMap:{},a=e.event_id,r=e.addAttendanceRecord,i=e.deleteAttendanceRecord,s=S(t),c=n[s],o=t.event_id&&t.event_id===a,d=t.notes?Object(y.jsxs)("div",{children:[" ",t.notes," "]}):"",u=t.phone?Object(y.jsxs)("span",{children:[" ",t.phone," "]}):"",l=t.email?Object(y.jsxs)("span",{children:[" ",t.email," "]}):"",m=o?"\u2714":"\u274c",h=o?"present":"absent",f=c?"pending":"",p=Object(y.jsxs)("div",{children:[d,l,u]}),b=c?Object(y.jsx)("span",{className:"pending-spinner"}):"",j=t.user_id&&t.lastname?t.lastname.charAt(0):t.lastname;return Object(y.jsxs)("tr",{className:"AttendanceRecord  "+h+" "+f,onClick:function(){o&&!c?i(t):c||r(t)},children:[Object(y.jsxs)("td",{className:"attendee",children:[t.firstname+" "+j,Object(y.jsx)("div",{className:"details",children:p})]}),Object(y.jsxs)("td",{className:"presence",children:[b,Object(y.jsx)("span",{className:"presenceIcon",children:m})]})]})};function S(e){return e.user_id?e.user_id:e.firstname+"."+e.lastname}var A=function(e){var t=e.attendees,n=e.pendingMap?e.pendingMap:{},a=e.event_id,r=e.addAttendanceRecord,i=e.deleteAttendanceRecord,s=t.sort((function(e,t){return e.firstname.toLowerCase()>t.firstname.toLowerCase()||e.firstname.toLowerCase()===t.firstname.toLowerCase()&&e.lastname.toLowerCase()>t.lastname.toLowerCase()?1:-1})).map((function(e){return Object(y.jsx)(g,{attendee:e,event_id:a,pendingMap:n,addAttendanceRecord:r,deleteAttendanceRecord:i},S(e))}));return Object(y.jsx)("div",{className:"AttendanceList",children:Object(y.jsx)("table",{children:Object(y.jsx)("tbody",{children:s})})})};var C=function(e){var t=e.hideAttendeeForm,n=e.addAttendanceRecord,r=Object(a.useState)(""),i=Object(d.a)(r,2),s=i[0],c=i[1],o=Object(a.useState)(""),u=Object(d.a)(o,2),l=u[0],m=u[1],h=Object(a.useState)(""),f=Object(d.a)(h,2),p=f[0],b=f[1],j=Object(a.useState)(""),v=Object(d.a)(j,2),O=v[0],x=v[1],_=Object(a.useState)(""),k=Object(d.a)(_,2),w=k[0],g=k[1];if(t)return null;return Object(y.jsxs)("div",{className:"NewAttendeeForm",children:[Object(y.jsx)("h2",{children:"Add New Attendee"}),Object(y.jsxs)("form",{action:"",children:[Object(y.jsx)("label",{htmlFor:"firstname",children:"First Name (required):"}),Object(y.jsx)("input",{type:"text",name:"firstname",id:"firstname",className:"required",value:s,onChange:function(e){return c(e.target.value)}}),Object(y.jsx)("br",{}),Object(y.jsx)("label",{htmlFor:"lastname",children:"Last Name (required): "}),Object(y.jsx)("input",{type:"text",name:"lastname",id:"lastname",className:"required",value:l,onChange:function(e){return m(e.target.value)}}),Object(y.jsx)("br",{}),Object(y.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(y.jsx)("input",{type:"text",name:"email",id:"email",value:p,onChange:function(e){return b(e.target.value)}}),Object(y.jsx)("br",{}),Object(y.jsx)("label",{htmlFor:"phone",children:"Phone:"}),Object(y.jsx)("input",{type:"text",name:"phone",id:"phone",value:O,onChange:function(e){return x(e.target.value)}}),Object(y.jsx)("br",{}),Object(y.jsx)("label",{htmlFor:"notes",children:"Notes:"}),Object(y.jsx)("br",{}),Object(y.jsx)("textarea",{name:"notes",id:"notes",value:w,onChange:function(e){return g(e.target.value)}}),Object(y.jsx)("br",{}),Object(y.jsx)("div",{className:"centered",children:Object(y.jsx)("input",{type:"submit",value:"Add",disabled:!(s&&l),onClick:function(){!function(e,t,n,a,r,i,s,c,o,d,u,l){e({firstname:t,lastname:a,email:i,phone:c,notes:d}),n(""),r(""),s(""),o(""),u("")}(n,s,c,l,m,p,b,O,x,w,g)}})})]})]})};var R=function(e){if(!e.isLoading)return null;return Object(y.jsx)("div",{className:"Loading",children:Object(y.jsx)("div",{className:"inner",children:Object(y.jsx)("div",{className:"spinner"})})})};var F=function(e){var t,n=Object(a.useState)(!0),r=Object(d.a)(n,2),i=r[0],s=r[1],c=Object(a.useState)(""),o=Object(d.a)(c,2),u=o[0],f=o[1],p=Object(a.useState)(!1),b=Object(d.a)(p,2),v=b[0],x=b[1],g=Object(a.useState)(!1),F=Object(d.a)(g,2),M=F[0],L=F[1],E=Object(a.useState)(!1),I=Object(d.a)(E,2),D=I[0],H=I[1],K=Object(a.useState)(!1),W=Object(d.a)(K,2),Z=W[0],q=W[1],z=Object(a.useState)(null),G=Object(d.a)(z,2),J=G[0],U=G[1],V=Object(a.useState)([]),Q=Object(d.a)(V,2),X=Q[0],Y=Q[1],$=Object(a.useState)([]),ee=Object(d.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)([]),re=Object(d.a)(ae,2),ie=re[0],se=re[1],ce=Object(a.useState)([]),oe=Object(d.a)(ce,2),de=oe[0],ue=oe[1],le=Object(a.useState)(null),me=Object(d.a)(le,2),he=me[0],fe=me[1],pe={},be=Object(m.a)(de);try{for(be.s();!(t=be.n()).done;){var je=t.value,ve=S(je);pe[ve]=je}}catch(_e){be.e(_e)}finally{be.f()}Object(a.useEffect)((function(){h.eventService||(h.eventService=new O,h.userService=new _,h.attendanceService=new j)})),Object(a.useEffect)((function(){i&&function(e,t,n,a,r){P.apply(this,arguments)}(s,U,Y,ne,se)}),[i]);var Oe=function(e,t,n,a,r){var i=e;(t||a||n||r)&&(i=i.filter((function(e){return!(!t||!e.event_id)||(!(!n||e.event_id)||(!(!a||e.user_id)||!(!r||!e.event_id||e.event_id!==B)))})));return i}(function(e,t){var n=t?t.toLowerCase().replace(/\s+/g,""):null,a=e;n&&(a=a.filter((function(e){return Object.values(e).map((function(e){return String(e).toLowerCase()})).join().replace(/\s+/g,"").includes(n)})));return a}(function(e,t,n,a){var r,i={},s=Object(m.a)(e);try{for(s.s();!(r=s.n()).done;){var c=r.value,o={user_id:c.id,firstname:"",lastname:""};c.nickname?o.firstname=c.nickname:c.first_name&&(o.firstname=c.first_name,c.last_name&&(o.lastname=c.last_name)),c.description&&(o.notes=c.description),i[c.id]=o}}catch(_e){s.e(_e)}finally{s.f()}var d,u=Object(m.a)(t);try{for(u.s();!(d=u.n()).done;){var h=d.value,f=S(h),p=i[f];(p=p?Object(l.a)({},p):Object(l.a)({},h)).id=h.id,p.notes||(p.notes=h.notes),p.event_id=h.event_id,i[f]=p}}catch(_e){u.e(_e)}finally{u.f()}var b,j=Object(m.a)(n);try{for(j.s();!(b=j.n()).done;){var v=b.value,O=S(v),x=i[O];(x=x?Object(l.a)({},x):Object(l.a)({},v)).id=v.id,x.event_id=v.event_id,v.phone&&!x.phone&&(x.phone=v.phone),v.user_id&&!x.user_id&&(x.user_id=v.user_id),v.user_id&&!x.user_id&&(x.user_id=v.user_id),v.firstname&&!x.firstname&&(x.firstname=v.firstname),v.lastname&&!x.lastname&&(x.lastname=v.lastname),v.notes&&!x.notes&&(x.notes=v.notes),i[O]=x}}catch(_e){j.e(_e)}finally{j.f()}var _,y=Object(m.a)(a);try{for(y.s();!(_=y.n()).done;){var k=_.value,w=S(k),g=i[w];g=g?Object(l.a)({},g):Object(l.a)({},k),i[w]=g}}catch(_e){y.e(_e)}finally{y.f()}var A=Object.values(i);return A||[]}(X,te,ie,de),u),v,M,D,Z),xe=!i&&(D||Z||!v);return Object(y.jsxs)("div",{className:"AttendanceSheet",children:[Object(y.jsx)(k,{name:J?J.title:""}),Object(y.jsx)(w,{searchTerm:u,setSearchTerm:f,filterRecent:v,setFilterRecent:x,filterOld:M,setFilterOld:L,filterNew:D,setFilterNew:H,filterPresent:Z,setFilterPresent:q}),Object(y.jsx)(A,{attendees:Oe,event_id:B,pendingMap:pe,addAttendanceRecord:function(e){fe(N(e,he,de,ue,se))},deleteAttendanceRecord:function(e){fe(function(e,t,n,a,r,i){return T.apply(this,arguments)}(e,he,de,ue,ne,se))}}),Object(y.jsx)(C,{hideAttendeeForm:!xe,addAttendanceRecord:function(e){fe(N(e,he,de,ue,se))}}),Object(y.jsx)(R,{isLoading:i})]})};function P(){return(P=Object(u.a)(o.a.mark((function e(t,n,a,r,i){var s,c,d,u,l,m,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.eventService,c=h.userService,d=h.attendanceService,e.next=5,s.get(B);case 5:return u=e.sent,n(u),e.next=9,c.retrieve();case 9:return l=e.sent,a(l),e.next=13,d.retrieve(null,256);case 13:return m=e.sent,r(m),e.next=17,d.retrieve(B,0);case 17:f=e.sent,i(f),t(!1);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,n,a,r){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(o.a.mark((function e(t,n,a,r,i){var c,d,u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=h.attendanceService,(d=Object(s.a)(a)).push(t),r(d),c.pendingRecords=d,(u=Object(l.a)({},t)).event_id=B,e.next=9,c.create(u);case 9:return e.next=11,n;case 11:return e.next=13,c.retrieve(B,0);case 13:m=e.sent,i(m),d=Object(s.a)(c.pendingRecords).filter((function(e){return e!==t})),r(d),c.pendingRecords=d,Promise.resolve(t);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(u.a)(o.a.mark((function e(t,n,a,r,i,c){var d,u,l,m,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=h.attendanceService,(u=Object(s.a)(a)).push(t),r(u),d.pendingRecords=u,l=t.id,e.next=8,d.delete(l);case 8:return e.next=10,n;case 10:return e.next=12,d.retrieve(null,256);case 12:return m=e.sent,i(m),e.next=16,d.retrieve(B,0);case 16:f=e.sent,c(f),u=Object(s.a)(d.pendingRecords).filter((function(e){return e!==t})),r(u),d.pendingRecords=u,Promise.resolve(t);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=1e3;function L(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(F,{})})}i.a.render(Object(y.jsx)(L,{}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.ed49e572.chunk.js.map