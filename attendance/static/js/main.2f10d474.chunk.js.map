{"version":3,"sources":["Configuration.js","MockAttendanceService.js","EventService.js","UserService.js","Header.js","SearchBar.js","AttendanceRecord.js","AttendanceList.js","NewAttendeeForm.js","Loading.js","AttendanceSheet.js","index.js"],"names":["Configuration","attendanceService","eventService","userService","MockAttendanceService","maxRecordId","pendingRecords","this","attendanceRecords","user_id","firstname","lastname","phone","email","notes","event_id","id","page","per_page","a","records","filter","record","offset","slice","Promise","res","setTimeout","Math","random","resolve","i","items","length","attendanceRecord","newRecord","push","attendee","EventService","date","searchParams","URLSearchParams","getTimezoneOffset","localDate","Date","getTime","dateString","toISOString","substring","set","url","serviceLocation","toString","fetch","response","ok","text","alert","status","statusText","error","json","event","method","mode","headers","body","JSON","stringify","UserService","Header","props","name","title","className","SearchBar","searchTerm","setSearchTerm","filterRecent","setFilterRecent","filterOld","setFilterOld","filterNew","setFilterNew","filterPresent","setFilterPresent","type","placeholder","value","onChange","target","checked","htmlFor","AttendanceRecord","pendingMap","addAttendanceRecord","deleteAttendanceRecord","key","attendeeKey","pending","present","attendanceIcon","attendanceClassName","pendingClassName","attendeeDetails","pendingSpinner","charAt","onClick","AttendanceList","attendees","rows","sort","b","toLowerCase","map","NewAttendeeForm","hideAttendeeForm","useState","setFirstname","setLastname","setEmail","setPhone","setNotes","action","disabled","attAttendanceRecord","handleAdd","Loading","isLoading","AttendanceSheet","eventId","setEventId","setIsLoading","eventRecord","setEventRecord","users","setUsers","recents","setRecents","recentUserKeys","setRecentUserKeys","currentAttendees","setCurrentAttendees","setPending","modificationPromise","setModificationPromise","pendingAttendee","useEffect","configureServices","loadEventId","loadAll","searchedAttendees","pattern","replace","result","Object","values","String","join","includes","searchAttendees","attendanceMap","user","nickname","first_name","last_name","description","recent","currentAttendee","possibleAttendees","filteredAttendees","isRecent","has","filterAttendees","showNewAttendeeForm","get","allUsers","moreUsers","retrieve","Set","add","allAttendees","moreAttendees","newPending","newAttendee","create","recordId","delete","paramString","window","location","search","urlParams","events","locale","navigator","languages","titleString","toLocaleDateString","weekday","day","month","year","createdEvent","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2f10d474.chunk.js","sourcesContent":[" let Configuration = {\n\n    attendanceService : null,\n    eventService : null,\n    userService: null,\n   \n}\n\nexport default Configuration;\n","\n/// Mock restful web service for getting attendance records.\n/// See:  https://dzone.com/articles/consuming-rest-api-with-reactjs\nclass MockAttendanceService {\n\n    maxRecordId = 1000;\n    pendingRecords = [];\n\n    constructor() {\n        this.attendanceRecords = [\n            { user_id: 99, firstname: 'Zaphod', lastname: 'Beeblebrox', phone: '', email: '', notes: 'Presedent of the Galaxy', event_id: 300, id: 199 },\n            { user_id: 100, firstname: 'Alice', lastname: 'Atalan', phone: '', email: '', notes: 'A Tuba', event_id: 1000, id: 200 },\n            { user_id: 101, firstname: 'Bob', lastname: 'Shamilov', phone: '', email: '', notes: 'Bob is a fella', event_id: 1000, id: 201 },\n            { user_id: 102, firstname: 'Charlie', lastname: 'Khalil', phone: '', email: '', notes: 'C Saxophone', event_id: 1000, id: 202 },\n            { user_id: 103, firstname: 'Denise', lastname: 'Usoyan', phone: '', email: '', notes: '', event_id: 1000, id: 203 },\n            { user_id: 104, firstname: 'Ethan', lastname: 'Adi', phone: '', email: '', notes: 'F Flute', event_id: 1000, id: 204 },\n\n            { user_id: 105, firstname: 'Francine', lastname: 'Shavershian', phone: '', email: '', notes: 'C Flute', id: 205 },\n            { user_id: 106, firstname: 'Greg', lastname: 'Mori', phone: '', email: '', notes: 'Clarinet', id: 206 },\n            { user_id: 107, firstname: 'Harry', lastname: 'Tamoyan', phone: '', email: '', notes: 'Bassoon', id: 207 },\n            { user_id: 108, firstname: 'Ichabod', lastname: 'Crane', phone: '', email: '', notes: 'Trombone', id: 208 },\n\n            { user_id: 110, firstname: 'Niel', lastname: 'Armstrong', phone: '', email: '', notes: 'Astronaut', event_id: 10, id: 300 },\n            { user_id: 111, firstname: 'Oprah', lastname: 'Khario', phone: '', email: '', notes: 'Celebrety', event_id: 10, id: 310 },\n            { user_id: 112, firstname: 'Peter', lastname: 'Serdar', phone: '', email: '', notes: 'Dude', event_id: 10, id: 320 },\n            { user_id: 113, firstname: 'Quinn', lastname: 'Evdal', phone: '', email: '', notes: 'Beatles', event_id: 10, id: 330 },\n\n            { firstname: 'Sonny', lastname: 'Bono', phone: '', email: '', notes: 'Celebrity husband', event_id: 1000, id: 340 },\n            { firstname: 'Frank', lastname: 'Zappa', phone: '', email: '', notes: 'Guitar', event_id: 1004, id: 350 }\n\n        ];\n    }\n\n    async retrieve(page, per_page, event_id) {\n        let records = this.attendanceRecords;\n    \n        if (event_id) {\n            records = records.filter(record => record.event_id === event_id);\n        }\n\n        if (page) {\n            let offset = (page - 1) * per_page;\n            records = records.slice(offset, per_page + offset);\n        }\n        \n        await new Promise((res) => setTimeout(res, 1000 * Math.random()));\n        return Promise.resolve(records);\n    }\n\n    async get(id) {\n        for (var i = 0; i < this.items.length; i++) {\n            if (this.attendanceRecords[i].id === id) {\n                return Promise.resolve(this.items[i]);\n            }\n        }\n        return null;\n    }\n\n    async create(attendanceRecord) {\n\n        // Fake delay\n        await new Promise((res) => setTimeout(res, 1000 * Math.random()));\n\n        // Add the new record\n        ++this.maxRecordId;\n        let newRecord = { ...attendanceRecord };\n        newRecord.id = this.maxRecordId;\n        this.attendanceRecords.push(newRecord);\n\n        //Return the promise\n        return Promise.resolve(newRecord);\n    }\n\n    async delete(id) {\n        // Fake delay\n        await new Promise((res) => setTimeout(res, 1000 * Math.random()));\n\n        // Remove the record\n        this.attendanceRecords = this.attendanceRecords.filter(attendee => { return id !== attendee.id; });\n\n        //Return the promise\n        return Promise.resolve(id);\n    }\n}\n\nexport default MockAttendanceService;\n","/// Restful web service for getting attendance records.\n/// See:  https://dzone.com/articles/consuming-rest-api-with-reactjs\n/// See:  https://developer.wordpress.org/rest-api/\nclass EventService {\n\n    /// Get rest api location\n    serviceLocation() {\n        return \"../../../../?rest_route=/workshop_attendance/v1/event\";\n    }\n\n    async retrieve(page, per_page, date) {\n\n        const searchParams = new URLSearchParams({\n            page: page,\n            per_page: per_page\n        });\n        if (date) {\n            // YYYY-MM-DD, local time please.\n            const offset = date.getTimezoneOffset();\n            const localDate = new Date(date.getTime() - (offset * 60 * 1000));\n            const dateString = localDate.toISOString().substring(0, 10);\n\n            searchParams.set('search', dateString);\n        }\n        const url = this.serviceLocation() + \"&\" + searchParams.toString();\n\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            const text = await response.text();\n            alert(\"Failed to get workshops Response: \" + response.status + \" \" + response.statusText + \"\\n\" + text);\n\n            return response.error();\n        }\n\n        return response.json();\n    }\n\n    /// Get request (get an event)\n    async get(id) {\n        const url = this.serviceLocation() + \"/\" + id;\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            const text = await response.text();\n            alert(\"Failed to get workshop \" + id + \", Response: \" + response.status + \" \" + response.statusText + \"\\n\" + text);\n\n            return response.error();\n        }\n\n        return response.json();\n    }\n\n    // Create event (post)\n    async create(event) {\n        const url = this.serviceLocation();\n\n        const response = await fetch(url, {\n            method: \"POST\",\n            mode: \"cors\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(event)\n        });\n\n        if (!response.ok) {\n            const text = await response.text();\n            alert(\"Failed to create workshop, Response: \" + response.status + \" \" + response.statusText + \"\\n\" + text);\n\n            return response.error();\n        }\n\n        return response.json();\n    }\n}\n\nexport default EventService;\n","/// webservice for getting users from wordpress.\n/// See: https://dzone.com/articles/consuming-rest-api-with-reactjs\n/// See: https://developer.wordpress.org/rest-api/reference/users/\n\nclass UserService {\n\n    /// Get rest api location\n    serviceLocation() {\n        return \"../../../../?rest_route=/wp/v2/users\";\n    }\n\n    /// Retrieve users.\n    /// page and per_page are needed because of the limits on the wordpress json api.\n    async retrieve(page, per_page) {\n\n        const searchParams = new URLSearchParams( {\n            page: page,\n            per_page: per_page\n        });\n        const url = this.serviceLocation() + \"&\" + searchParams.toString();\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            const text = await response.text();\n            alert( \"Failed to list users, Response: \" + response.status + \" \" + response.statusText + \"\\n\" + text);\n\n            return response.error();\n        }\n        \n        return response.json();\n    }\n}\n\nexport default UserService;\n","import React from 'react';\n\nexport default Header\n\nfunction Header(props) {\n  const name = props.name;\n  const title = name ? 'Attendance for ' + name : 'Loading...'\n\n  return (\n    <div className='Header'>\n      <h1>{title}</h1>\n    </div>\n  )\n}\n","import React from 'react';\n\nexport default SearchBar\n\nfunction SearchBar(props) {\n  const searchTerm = props.searchTerm;\n  const setSearchTerm = props.setSearchTerm;\n\n  const filterRecent = props.filterRecent;\n  const setFilterRecent = props.setFilterRecent;\n  const filterOld = props.filterOld;\n  const setFilterOld = props.setFilterOld;\n  const filterNew = props.filterNew;\n  const setFilterNew = props.setFilterNew;\n  const filterPresent = props.filterPresent;\n  const setFilterPresent = props.setFilterPresent;\n\n  return (\n    <div className='SearchBar'>\n      <form>\n        <input type=\"text\" name=\"search\" placeholder=\"&#128269;\" value={searchTerm}\n          onChange={(event) => setSearchTerm(event.target.value)} />\n        <br />\n        <input type=\"checkbox\" name=\"recent\" id=\"recent\" checked={!!filterRecent}\n          onChange={(event) => setFilterRecent(event.target.checked)} />\n        <label htmlFor=\"recent\">recent</label>\n        <input type=\"checkbox\" name=\"old\" id=\"old\" checked={!!filterOld}\n          onChange={(event) => setFilterOld(event.target.checked)} />\n        <label htmlFor=\"old\">rusty</label>\n        <input type=\"checkbox\" name=\"new\" id=\"new\" checked={!!filterNew}\n          onChange={(event) => setFilterNew(event.target.checked)} />\n        <label htmlFor=\"new\">new folks</label>\n        <input type=\"checkbox\" name=\"attendees\" id=\"attendees\" checked={!!filterPresent}\n          onChange={(event) => setFilterPresent(event.target.checked)} />\n        <label htmlFor=\"attendees\">attendees</label>\n      </form>\n    </div>\n  )\n}\n","import React from 'react';\n\nexport default AttendanceRecord\n\nexport function attendeeKey(attendee) {\n  const key = attendee.user_id ? attendee.user_id : (attendee.firstname + '.' + attendee.lastname);\n  return key;\n}\n\nfunction AttendanceRecord(props) {\n  const attendee = props.attendee;\n  const pendingMap = props.pendingMap ? props.pendingMap : {};\n  const event_id = props.event_id;\n  const addAttendanceRecord = props.addAttendanceRecord;\n  const deleteAttendanceRecord = props.deleteAttendanceRecord;\n\n  const key = attendeeKey(attendee);\n\n  const pending = pendingMap[key];\n  const present = attendee.event_id && (attendee.event_id === event_id);\n\n  const notes = attendee.notes ? <div> {attendee.notes} </div> : '';\n  const phone = attendee.phone ? <span> {attendee.phone} </span> : '';\n  const email = attendee.email ? <span> {attendee.email} </span> : '';\n\n  const attendanceIcon = present ? '\\u2714' : '\\u274c';\n  const attendanceClassName = present ? 'present' : 'absent';\n  const pendingClassName = pending ? 'pending' : '';\n  const attendeeDetails = <div>\n    {notes}\n    {email}\n    {phone}\n  </div>;\n\n  const pendingSpinner = pending ? (<span className=\"pending-spinner\" />) : '';\n\n  // For not new users, don't show full last name\n  const lastname = (attendee.user_id && attendee.lastname) ? attendee.lastname.charAt(0) : attendee.lastname;\n  return (\n    <tr className={'AttendanceRecord  ' + attendanceClassName + ' ' + pendingClassName}\n      onClick={() => {\n        if (present && !pending) {\n          deleteAttendanceRecord(attendee);\n        } else if (!pending) {\n          addAttendanceRecord(attendee);\n        }\n      }} >\n      <td className='attendee' >\n        {attendee.firstname + ' ' + lastname}\n        <div className=\"details\">\n          {attendeeDetails}\n        </div>\n      </td>\n      <td className='presence' >{pendingSpinner}<span className='presenceIcon'>{attendanceIcon}</span></td>\n    </tr>\n  )\n}\n","import React from 'react';\n\nimport AttendanceRecord, { attendeeKey } from './AttendanceRecord.js'\n\nexport default AttendanceList\n\nfunction AttendanceList(props) {\n  const attendees = props.attendees;\n  const pendingMap = props.pendingMap ? props.pendingMap : {}\n  const event_id = props.event_id;\n\n  const addAttendanceRecord = props.addAttendanceRecord;\n  const deleteAttendanceRecord = props.deleteAttendanceRecord;\n\n  const rows = attendees\n    .sort((a, b) => (a.firstname.toLowerCase() > b.firstname.toLowerCase()) ? 1 : (a.firstname.toLowerCase() === b.firstname.toLowerCase()) ? ((a.lastname.toLowerCase() > b.lastname.toLowerCase()) ? 1 : -1) : -1)\n    .map((attendee) =>\n      <AttendanceRecord attendee={attendee} event_id={event_id} pendingMap={pendingMap} key={attendeeKey(attendee)} \n      addAttendanceRecord={addAttendanceRecord} \n      deleteAttendanceRecord={deleteAttendanceRecord} />\n    );\n  return (\n    <div className='AttendanceList'>\n      <table>\n        <tbody>\n          {rows}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n","import React, { useState } from 'react';\n\nexport default NewAttendeeForm\n\n/// Handle clicking on the add button\nfunction handleAdd(addAttendanceRecord, firstname, setFirstname, lastname, setLastname, email, setEmail, phone, setPhone, notes, setNotes, attAttendanceRecord) {\n  // Create record\n  const attendee = { firstname: firstname, lastname: lastname, email: email, phone: phone, notes: notes };\n\n  // Add the record\n  addAttendanceRecord(attendee);\n\n  // Clear the form.\n  setFirstname('');\n  setLastname('');\n  setEmail('');\n  setPhone('');\n  setNotes('');\n}\n\nfunction NewAttendeeForm(props) {\n\n  const hideAttendeeForm = props.hideAttendeeForm;\n  const addAttendanceRecord = props.addAttendanceRecord;\n\n  const [firstname, setFirstname] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [notes, setNotes] = useState('');\n\n  if (hideAttendeeForm) {\n    return null;\n  }\n\n  return (\n    <div className='NewAttendeeForm'>\n      <h2>Add New Attendee</h2>\n      <form action=\"\">\n        <label htmlFor=\"firstname\">First Name (required):</label>\n        <input type=\"text\" name=\"firstname\" id=\"firstname\" className='required' value={firstname} onChange={(event) => setFirstname(event.target.value)} />\n        <br />\n        <label htmlFor=\"lastname\">Last Name (required): </label>\n        <input type=\"text\" name=\"lastname\" id=\"lastname\" className='required' value={lastname} onChange={(event) => setLastname(event.target.value)} />\n        <br />\n        <label htmlFor=\"email\">Email:</label>\n        <input type=\"text\" name=\"email\" id=\"email\" value={email} onChange={(event) => setEmail(event.target.value)} />\n        <br />\n        <label htmlFor=\"phone\">Phone:</label>\n        <input type=\"text\" name=\"phone\" id=\"phone\" value={phone} onChange={(event) => setPhone(event.target.value)} />\n        <br />\n        <label htmlFor=\"notes\">Notes:</label>\n        <br />\n        <textarea name=\"notes\" id=\"notes\" value={notes} onChange={(event) => setNotes(event.target.value)} />\n        <br />\n        <div className='centered'>\n          <input type=\"submit\" value=\"Add\" disabled={!(firstname && lastname)}\n            onClick={() => {\n              handleAdd(addAttendanceRecord, firstname, setFirstname, lastname, setLastname, email, setEmail, phone, setPhone, notes, setNotes);\n            }} />\n        </div>\n      </form>\n    </div>\n  )\n}\n","import React from 'react';\n\nexport default Loading\n\nfunction Loading(props) {\n    const isLoading = props.isLoading;\n\n    if (!isLoading) {\n        return null;\n    }\n\n    return (\n        <div className='Loading'>\n            <div className='inner'>\n                <div className='spinner'></div>\n            </div>\n        </div>\n    );\n}","import React, { useEffect, useState } from 'react';\nimport Configuration from './Configuration';\nimport MockAttendanceService from './MockAttendanceService';\nimport MockEventService from './MockEventService';\nimport MockUserService from './MockUserService';\nimport EventService from './EventService';\nimport UserService from './UserService';\n\nimport Header from './Header'\nimport SearchBar from './SearchBar'\nimport AttendanceList from './AttendanceList'\nimport { attendeeKey } from './AttendanceRecord';\nimport NewAttendeeForm from './NewAttendeeForm'\nimport Loading from './Loading'\n\nexport default AttendanceSheet\n\n/// Compute attendees from users and attendance records\nfunction possibleAttendees(eventId, users, recents, currentAttendees, pending) {\n\tlet attendanceMap = {}\n\n\t// Add users to the map.\n\tfor (const user of users) {\n\t\tlet attendanceRecord = { user_id: user.id, firstname: '', lastname: '' };\n\t\tif (user.nickname) {\n\t\t\tattendanceRecord.firstname = user.nickname;\n\t\t} else if (user.first_name) {\n\t\t\tattendanceRecord.firstname = user.first_name;\n\t\t\tif (user.last_name) {\n\t\t\t\tattendanceRecord.lastname = user.last_name;\n\t\t\t}\n\t\t} else if (user.name) {\n\t\t\tattendanceRecord.firstname = user.name;\n\t\t}\n\n\t\tif (user.description) {\n\t\t\tattendanceRecord.notes = user.description;\n\t\t}\n\n\t\tattendanceMap[user.id] = attendanceRecord;\n\t}\n\n\t// Add recents to the map\n\tfor (const recent of recents) {\n\t\tif (recent.event_id === eventId) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst key = attendeeKey(recent);\n\t\tlet attendanceRecord = attendanceMap[key];\n\t\tif (!attendanceRecord) {\n\t\t\tattendanceRecord = { ...recent };\n\t\t} else {\n\t\t\tattendanceRecord = { ...attendanceRecord };\n\t\t}\n\n\t\tattendanceRecord.id = recent.id;\n\n\t\tif (!attendanceRecord.notes) {\n\t\t\tattendanceRecord.notes = recent.notes;\n\t\t}\n\t\tattendanceRecord.event_id = recent.event_id;\n\t\tattendanceMap[key] = attendanceRecord;\n\t}\n\n\t// Add currentAttendees to the map\n\tfor (const currentAttendee of currentAttendees) {\n\t\tconst key = attendeeKey(currentAttendee);\n\t\tlet attendanceRecord = attendanceMap[key];\n\t\tif (!attendanceRecord) {\n\t\t\tattendanceRecord = { ...currentAttendee };\n\t\t} else {\n\t\t\tattendanceRecord = { ...attendanceRecord };\n\t\t}\n\n\t\tattendanceRecord.id = currentAttendee.id;\n\t\tattendanceRecord.event_id = currentAttendee.event_id;\n\t\tif (currentAttendee.phone && !attendanceRecord.phone) {\n\t\t\tattendanceRecord.phone = currentAttendee.phone;\n\t\t}\n\t\tif (currentAttendee.user_id && !attendanceRecord.user_id) {\n\t\t\tattendanceRecord.user_id = currentAttendee.user_id;\n\t\t}\n\t\tif (currentAttendee.user_id && !attendanceRecord.user_id) {\n\t\t\tattendanceRecord.user_id = currentAttendee.user_id;\n\t\t}\n\t\tif (currentAttendee.firstname && !attendanceRecord.firstname) {\n\t\t\tattendanceRecord.firstname = currentAttendee.firstname;\n\t\t}\n\t\tif (currentAttendee.lastname && !attendanceRecord.lastname) {\n\t\t\tattendanceRecord.lastname = currentAttendee.lastname;\n\t\t}\n\t\tif (currentAttendee.notes && !attendanceRecord.notes) {\n\t\t\tattendanceRecord.notes = currentAttendee.notes;\n\t\t}\n\n\t\tattendanceMap[key] = attendanceRecord;\n\t}\n\n\t// Add pending to the map\n\tfor (const pendingAttendee of pending) {\n\t\tconst key = attendeeKey(pendingAttendee);\n\t\tlet attendanceRecord = attendanceMap[key];\n\t\tif (!attendanceRecord) {\n\t\t\tattendanceRecord = { ...pendingAttendee };\n\t\t} else {\n\t\t\tattendanceRecord = { ...attendanceRecord };\n\t\t}\n\n\t\tattendanceMap[key] = attendanceRecord;\n\t}\n\n\t// Iterate the map to create result.\n\tconst attendees = Object.values(attendanceMap);\n\treturn attendees ? attendees : [];\n}\n\n/// Return the subset of attendees with text that matches searchTerm\nfunction searchAttendees(attendees, searchTerm) {\n\tconst pattern = searchTerm ? searchTerm.toLowerCase().replace(/\\s+/g, '') : null;\n\tlet result = attendees;\n\n\tif (pattern) {\n\t\tresult = result.filter(attendee => {\n\t\t\tconst line = Object.values(attendee).map(value => {\n\t\t\t\treturn String(value).toLowerCase()\n\t\t\t}).join().replace(/\\s+/g, '');\n\t\t\treturn line.includes(pattern);\n\t\t})\n\t}\n\n\treturn result;\n}\n\n/// Return the subset of attendees that match the filter criteria\nfunction filterAttendees(eventId, attendees, recentUserKeys, filterRecent, filterOld, filterNew, filterPresent) {\n\tlet result = attendees;\n\n\tif (filterRecent || filterNew || filterOld || filterPresent) {\n\t\tresult = result.filter(attendee => {\n\n\t\t\tif (filterNew && !attendee.user_id) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (filterPresent && attendee.event_id && attendee.event_id === eventId) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (filterRecent || filterOld) {\n\t\t\t\tconst key = attendeeKey(attendee);\n\t\t\t\tconst isRecent = recentUserKeys.has(key);\n\n\t\t\t\tif (filterRecent && isRecent) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (filterOld && !isRecent) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t});\n\t}\n\n\treturn result;\n}\n\n/// Load all data from backend.\nasync function loadAll(eventId, setIsLoading, setEventRecord, setUsers, setRecents, setRecentUserKeys, setCurrentAttendees) {\n\tconst eventService = Configuration.eventService;\n\tconst userService = Configuration.userService;\n\tconst attendanceService = Configuration.attendanceService;\n\n\tconst eventRecord = await eventService.get(eventId);\n\tsetEventRecord(eventRecord);\n\n\tlet page = 1;\n\tlet allUsers = [];\n\tlet moreUsers = true;\n\tdo {\n\t\tconst users = await userService.retrieve(page, 100);\n\t\tallUsers = [...allUsers, ...users];\n\t\tsetUsers(allUsers);\n\t\tmoreUsers = users.length > 0;\n\t\t++page;\n\t} while (moreUsers);\n\n\tconst recents = await attendanceService.retrieve(1, 100 );\n\tsetRecents(recents);\n\n\tlet recentUserKeys = new Set();\n\tfor (const recent of recents) {\n\t\tconst key = attendeeKey(recent);\n\t\trecentUserKeys.add(key);\n\t}\n\tsetRecentUserKeys(recentUserKeys);\n\n\tpage = 1;\n\tlet allAttendees = [];\n\tlet moreAttendees = true;\n\tdo {\n\t\tconst currentAttendees = await attendanceService.retrieve(page, 100, eventId);\n\t\tallAttendees = [...allAttendees, ...currentAttendees];\n\t\tsetCurrentAttendees(allAttendees);\n\t\tmoreAttendees = currentAttendees.length > 0;\n\t\t++page;\n\t} while (moreAttendees);\n\n\t\n\tsetIsLoading(false);\n}\n\n/// Add an attendance record (add attendee)\nasync function addAttendanceRecord(eventId, attendee, modificationPromise, pending, setPending, setCurrentAttendees) {\n\tconst attendanceService = Configuration.attendanceService;\n\n\t// Add record to pending\n\tlet newPending = [...pending];\n\tnewPending.push(attendee);\n\tsetPending(newPending);\n\tattendanceService.pendingRecords = newPending;\n\n\t// Create the record to add\n\tlet newAttendee = { ...attendee };\n\tnewAttendee.event_id = eventId;\n\n\t// Ask for the server to create the attendee record\n\tawait attendanceService.create(newAttendee);\n\n\t// Wait for previous modification to complete\n\tawait modificationPromise\n\n\t// List current attendees again and set them\n\tlet page = 1;\n\tlet allAttendees = [];\n\tlet moreAttendees = true;\n\tdo {\n\t\tconst currentAttendees = await attendanceService.retrieve(page, 100, eventId);\n\t\tallAttendees = [...allAttendees, ...currentAttendees];\n\t\tsetCurrentAttendees(allAttendees);\n\t\tmoreAttendees = currentAttendees.length > 0;\n\t\t++page;\n\t} while (moreAttendees);\n\n\t// Remove record from pending.\n\t// This could get messed up if we didn't serilize the modification requests.\n\tnewPending = [...attendanceService.pendingRecords].filter(pendingAttendee => {\n\t\treturn pendingAttendee !== attendee;\n\t});\n\tsetPending(newPending);\n\tattendanceService.pendingRecords = newPending;\n\tPromise.resolve(attendee);\n}\n\n/// Add an attendance record (add attendee)\nasync function deleteAttendanceRecord(eventId, attendee, modificationPromise, pending, setPending, setRecents, setCurrentAttendees) {\n\tconst attendanceService = Configuration.attendanceService;\n\n\t// Add record to pending\n\tlet newPending = [...pending];\n\tnewPending.push(attendee);\n\tsetPending(newPending);\n\tattendanceService.pendingRecords = newPending;\n\n\t// Get the id\n\tconst recordId = attendee.id;\n\n\t// Delete the attendance record\n\tawait attendanceService.delete(recordId);\n\n\t// Wait for previous modification to complete\n\tawait modificationPromise\n\n\t// List recent attendees again and set them\n\tconst recents = await attendanceService.retrieve(1, 100);\n\tsetRecents(recents);\n\n\t// List current attendees again and set them\n\tlet page = 1;\n\tlet allAttendees = [];\n\tlet moreAttendees = true;\n\tdo {\n\t\tconst currentAttendees = await attendanceService.retrieve(page, 100, eventId);\n\t\tallAttendees = [...allAttendees, ...currentAttendees];\n\t\tsetCurrentAttendees(allAttendees);\n\t\tmoreAttendees = currentAttendees.length > 0;\n\t\t++page;\n\t} while (moreAttendees);\n\n\t// Remove record from pending.\n\t// This could get messed up if we didn't serilize the modification requests.\n\tnewPending = [...attendanceService.pendingRecords].filter(pendingAttendee => {\n\t\treturn pendingAttendee !== attendee;\n\t});\n\tsetPending(newPending);\n\tattendanceService.pendingRecords = newPending;\n\tPromise.resolve(attendee);\n}\n\nfunction configureServices() {\n\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\t// Development code\n\t\tif (!Configuration.userService) {\n\t\t\tConfiguration.eventService = new MockEventService();\n\t\t\tConfiguration.userService = new MockUserService();\n\t\t\tConfiguration.attendanceService = new MockAttendanceService();\n\t\t}\n\t} else {\n\t\t// production code\n\t\tif (!Configuration.userService) {\n\t\t\tConfiguration.eventService = new EventService();\n\t\t\tConfiguration.userService = new UserService();\n\t\t\tConfiguration.attendanceService = new MockAttendanceService();\n\t\t}\n\t}\n}\n\nasync function loadEventId(setEventId) {\n\tlet eventId = null;\n\n\tif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n\t\t// dummy event Id\n\t\teventId = 1000;\n\t}\n\n\t// get id from url param \"event_id\"\n\tif (!eventId) {\n\t\tconst paramString = window.location.search;\n\t\tconst urlParams = new URLSearchParams(paramString);\n\t\teventId = urlParams.get('event_id');\n\t}\n\n\t// No event id? try getting today's event.\n\tif (!eventId) {\n\t\tconfigureServices();\n\t\tconst eventService = Configuration.eventService;\n\n\t\t// try to find today's event\n\t\tconst events = await eventService.retrieve(1 /* page */, 100 /* limit */, new Date());\n\n\t\tif (events.length === 1) {\n\t\t\teventId = events[0].id;\n\t\t}\n\t}\n\n\t// Still no event id?  Create a new event\n\tif (!eventId) {\n\t\tconfigureServices();\n\t\tconst eventService = Configuration.eventService;\n\n\t\tconst date = new Date();\n\t\t// YYYY-MM-DD, local time please.\n\t\tconst offset = date.getTimezoneOffset();\n\t\tconst localDate = new Date(date.getTime() - (offset * 60 * 1000));\n\t\tconst dateString = localDate.toISOString().substring(0, 10);\n\n\t\tconst locale = navigator.languages[0];\n\t\tconst titleString = localDate.toLocaleDateString(locale, { weekday: 'long' }) + \" Workshop \" + localDate.toLocaleDateString(locale, { day: 'numeric', month: 'long', year: 'numeric' });\n\t\tconst event = {\n\t\t\tdate: dateString,\n\t\t\ttitle: titleString\n\t\t};\n\n\t\tconst createdEvent = await eventService.create(event);\n\t\teventId = createdEvent.id;\n\t}\n\n\tsetEventId(eventId);\n\treturn Promise.resolve(eventId);\n}\n\n/// The actual component!\nfunction AttendanceSheet(props) {\n\tconst [eventId, setEventId] = useState(0);\n\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tconst [searchTerm, setSearchTerm] = useState('');\n\n\tconst [filterRecent, setFilterRecent] = useState(false);\n\tconst [filterOld, setFilterOld] = useState(false);\n\tconst [filterNew, setFilterNew] = useState(false);\n\tconst [filterPresent, setFilterPresent] = useState(false);\n\n\tconst [eventRecord, setEventRecord] = useState(null);\n\tconst [users, setUsers] = useState([]);\n\tconst [recents, setRecents] = useState([])\n\tconst [recentUserKeys, setRecentUserKeys] = useState(null);\n\tconst [currentAttendees, setCurrentAttendees] = useState([]);\n\tconst [pending, setPending] = useState([]);\n\n\tconst [modificationPromise, setModificationPromise] = useState(null);\n\n\tlet pendingMap = {};\n\tfor (const pendingAttendee of pending) {\n\t\tconst key = attendeeKey(pendingAttendee);\n\t\tpendingMap[key] = pendingAttendee;\n\t}\n\n\t// Set up configuration\n\tuseEffect(() => {\n\t\tconfigureServices();\n\t});\n\n\t// load the current event id\n\tuseEffect(() => {\n\t\tif (!eventId) {\n\t\t\tloadEventId(setEventId);\n\t\t}\n\t}, [eventId]);\n\n\t// Load initial data.\n\tuseEffect(() => {\n\t\tif (isLoading && eventId) {\n\t\t\tloadAll(eventId, setIsLoading, setEventRecord, setUsers, setRecents, setRecentUserKeys, setCurrentAttendees)\n\t\t}\n\t}, [isLoading, eventId]);\n\n\t// Attendance\n\tconst attendees = possibleAttendees(eventId, users, recents, currentAttendees, pending);\n\n\t// Search\n\tconst searchedAttendees = searchAttendees(attendees, searchTerm);\n\n\t// Filter\n\tconst filteredAttendees = filterAttendees(eventId, searchedAttendees, recentUserKeys, filterRecent, filterOld, filterNew, filterPresent);\n\n\tconst showNewAttendeeForm = !isLoading && (filterNew || filterPresent || !filterRecent);\n\n\treturn (\n\t\t<div className=\"AttendanceSheet\">\n\t\t\t<Header name={eventRecord ? eventRecord.title : ''} />\n\t\t\t<SearchBar\n\t\t\t\tsearchTerm={searchTerm} setSearchTerm={setSearchTerm}\n\t\t\t\tfilterRecent={filterRecent} setFilterRecent={setFilterRecent}\n\t\t\t\tfilterOld={filterOld} setFilterOld={setFilterOld}\n\t\t\t\tfilterNew={filterNew} setFilterNew={setFilterNew}\n\t\t\t\tfilterPresent={filterPresent} setFilterPresent={setFilterPresent}\n\t\t\t/>\n\t\t\t<AttendanceList attendees={filteredAttendees} event_id={eventId} pendingMap={pendingMap}\n\t\t\t\taddAttendanceRecord={(attendee) => {\n\t\t\t\t\tsetModificationPromise(addAttendanceRecord(eventId, attendee, modificationPromise, pending, setPending, setCurrentAttendees));\n\t\t\t\t}}\n\t\t\t\tdeleteAttendanceRecord={(attendee) => {\n\t\t\t\t\tsetModificationPromise(deleteAttendanceRecord(eventId, attendee, modificationPromise, pending, setPending, setRecents, setCurrentAttendees));\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<NewAttendeeForm hideAttendeeForm={!showNewAttendeeForm}\n\t\t\t\taddAttendanceRecord={(attendee) => {\n\t\t\t\t\tsetModificationPromise(addAttendanceRecord(eventId, attendee, modificationPromise, pending, setPending, setCurrentAttendees));\n\t\t\t\t}} />\n\t\t\t<Loading isLoading={isLoading} />\n\t\t</div>\n\t)\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport AttendanceSheet from './AttendanceSheet'\n\n\nfunction App() {\n\n  return (\n    <div className=\"App\">\n      <AttendanceSheet />\n    </div>\n  );\n}\n\n// ========================================\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}